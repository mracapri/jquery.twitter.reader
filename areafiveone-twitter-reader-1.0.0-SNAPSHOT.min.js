(function(d){var y=" ";var p=1;var x="http://twitter.com/statuses/user_timeline/";var r=".json";var a=0;var t=0;var i="<span/>";var g="<table/>";var e="<tr/>";var c="<hr/>";var o="command";var k="css";var l="twitterUser";var q="timeRefresh";var n="numberOfTwits";var f="result";var j=2000;var b="";var h=0;var s=true;var w=new Array();var v=new Array();var u={init:function(z){var A=d.fn.twitterReader.buildUi(z);d(A).appendTo(this)}};d.fn.twitterReader=function(A){var B=d.fn.twitterReader.defaults;var z=!A?B:A;if(z.hasOwnProperty(l)){for(key in d.fn.twitterReader.defaults){if(!z.hasOwnProperty(key)){z[key]=d.fn.twitterReader.defaults[key]}}return this.each(function(){return u.init.apply(d(this),[z])})}else{d(this).text("Plugin requiere usuario de twitter con timeline publico")}};function m(z){if(window.console&&window.console.log){window.console.log(z)}}d.fn.twitterReader.drawTwitsInContainer=function(A,z){d.each(A,function(B,D){w[B]=D;var F=d(i).text(d.fn.twitterReader.relativeTime(D.created_at));var E=d.fn.twitterReader.convertUrlToLink(D.text);var C=d(e).html(E).appendTo(z).hide();d(F).appendTo(C);d(c).appendTo(C);d(C).fadeIn(j)})};d.fn.twitterReader.buildUi=function(A){var z=d(g);d.fn.twitterReader.fetchTwits(A,function(B){d.fn.twitterReader.drawTwitsInContainer(B,z)});d(z).everyTime(A[q],function(){d.fn.twitterReader.fetchTwits(A,function(D){d.each(D,function(J,K){v[J]=K});var F=w[0].id;d.each(v,function(J,K){v[J]=K;if(v[J].id==F){h=J-0}});var I=v.length-h;var C=h-1;if(h>0){for(var G=I;G<v.length;G++,C--){d(z).find("tr").eq(G).hide(j).remove();var H=d(i).text(d.fn.twitterReader.relativeTime(v[C].created_at));var E=d.fn.twitterReader.convertUrlToLink(v[C].text);var B=d(e).html(E+y).fadeIn(j).prependTo(z).hide();d(H).appendTo(B);d(c).appendTo(B);d(B).fadeIn(j)}w=[];w=v;h=0;v=[]}else{d.fn.twitterReader.fetchTwits(A,function(J){d(z).find("tr").hide(j).remove();d.fn.twitterReader.drawTwitsInContainer(J,z)})}if(d.isFunction(A[f])){A.result()}})});return z};d.fn.twitterReader.fetchTwits=function(B,z){var A=x+B[l]+r+"?count="+B[n]+"&callback=?";m(A);d.getJSON(A,z)};d.fn.twitterReader.convertUrlToLink=function(z){return z.replace(/[A-Za-z]+:\/\/[A-Za-z0-9-_]+\.[A-Za-z0-9-_:%&\?\/.=]+/,function(A){return A.link(A)})};d.fn.twitterReader.relativeTime=function(z){var C=1;var D=2;var F=5;var A=3;var E=z.split(y);z=E[C]+y+E[D]+", "+E[F]+y+E[A];var G=Date.parse(z);var B=(arguments.length>p)?arguments[p]:new Date();var I=parseInt((B.getTime()-G)/1000);I=I+(B.getTimezoneOffset()*60);var H="";if(I<60){H=" hace un minuto"}else{if(I<120){H=" hace un par de minutos"}else{if(I<(45*60)){H=" hace "+(parseInt(I/60)).toString()+" minutos"}else{if(I<(90*60)){H=" hace una hora"}else{if(I<(24*60*60)){H=" hace "+(parseInt(I/3600)).toString()+" horas"}else{if(I<(48*60*60)){H=" hace un dia"}else{H=" hace "+(parseInt(I/86400)).toString()+" dias"}}}}}}return H};d.fn.twitterReader.defaults={numberOfTwits:10,timeRefresh:30000,result:function(){}}})(jQuery);